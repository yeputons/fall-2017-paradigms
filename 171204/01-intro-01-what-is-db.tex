\section{Основы основ}
\subsection{Что такое СУБД}

\begin{frame}
	\tableofcontents[currentsection,currentsubsection]
\end{frame}

\begin{frame}{Постановка задачи}
	\begin{itemize}
		\item Пусть мы пишем приложения для учёта товаров в магазине.
		\item Надо знать:
			\begin{enumerate}
				\item Какой товар есть на складе и витринах.
				\item Где он лежит.
				\item По какой цене товар закуплен (могут быть разные партии).
				\item По какой цене товар сейчас продаётся.
				\item Какие покупки были сделаны (что куплено вместе, на какую сумму, в какое время).
			\end{enumerate}
		\item Возможные события:
			\begin{enumerate}
				\item Приехала поставка со склада.
				\item Касса пробила чек "--- совершена покупка.
			\end{enumerate}
		\item Надо, чтобы приложение сохраняло состояние между перезапусками.
		\item Вопрос: как это сделать?
	\end{itemize}
\end{frame}

\begin{frame}{Усложнения}
	\begin{itemize}
		\item Запуск должен быть быстрый
		\item Данные могут не помещаться в память
		\item Может случайно отключаться электричество
		\item Десять касс и два компьютера в разных концах склада.
		\item Хочется получать обновления <<как только так сразу>>
		\item Иногда может теряться связь между кассами и складом
		\item Может меняться формат хранения (например, добавили бонусы за товар)
		\item Кассы не должны уметь как угодно менять данные
	\end{itemize}
\end{frame}

\begin{frame}[t]{СУБД}
	\begin{itemize}
		\item \textit{Система управления базами данных} (СУБД) "--- это сервис, который умеет хранить данные \textit{произвольной структуры}
			(в определённых рамках, конечно, не совсем бессистемные).
		\item \textit{База данных} "--- это описание данных \textbf{и их структуры}, которые хранятся в СУБД.
		\item \textit{Реляционные БД} "--- это классика (существуют с 80-х годов), их и будем изучать.
		\item Обычно запросы к реляционным СУБД формулируются на декларативном языке SQL
			(Structured Query Language).
		\item Примеры реляционных: MySQL, MariaDB, Oracle, MS SQL, Sqlite.
		\item Примеры нереляционных (нынче модно): MongoDB, Redis, Memcached, Cassandra.
	\end{itemize}
\end{frame}

\begin{frame}[t]{В чём плюсы}
	\begin{itemize}
		\item Можно выделить один (или несколько) больших серверов под хранение обработку данных; для всех приложений в организации
		\item Автоматически получаем единый контроль доступа, бэкапы, масштабирование и прочие плюшки
		\item SQL все знают и могут делать запросы к БД напрямую (для отладки/отчётов)
		\item Сложнее посадить баг в коде и уронить приложение
	\end{itemize}
\end{frame}

\begin{frame}{В чём минусы}
	\begin{itemize}
		\item
			Мы отдаём контроль за скоростью выполнения и потреблением памяти в руки СУБД
			(как и при любой абстракции).
			Это обычно приемлемый компромисс.
		\item
			Приложение сложнее запустить: нужно настроить СУБД, что обычно занимает несколько шагов.
			В нестадартных ситуациях "--- больше.
		\item
			Иногда приложение требует слишком хитрую настройку СУБД (например, для корректной работы
			с не-латиницей и датами).
		\item
			Многие инструменты заточены под промышленные решения и имеют слишком много рычажков и кнопок
			для простых целей.
	\end{itemize}
\end{frame}

\begin{frame}{Встраиваемые СУБД}
	\begin{itemize}
		\item Самая известная встраиваемая СУБД "--- sqlite.
		\item Предназначена не для сетевого доступа, а для использования в рамках одной конкретной программы.
		\item Её можно просто вкомпилировать в своё приложение, не требуется никакой настройки.
		\item sqlite хранит каждую БД в отдельном файле определённого формата (последний "--- sqlite3).
		\item Формат sqlite3 один на все приложения, можно даже залезть в чужие БД и посмотреть.
		\item Занимает мало места в скомпилированном приложении.
		\item
			Используется \href{http://www.sqlite.org/famous.html}{во многих приложениях}:
			под Android, в Firefox, в Chrome, в клиенте Dropbox\footnote{ищите файлы \t{.db}, \t{.sqlite}, \t{.sqlite3}}...
		\item Задание: скачайте файл \t{example.sqlite3}
	\end{itemize}
\end{frame}

\begin{frame}{Реляционные СУБД на практике}
	\begin{itemize}
		\item СУБД хранит одну или несколько независимых БД (баз данных).
		\item Каждая БД "--- это набор \textit{таблиц} (<<отношений>>), которые содержат данные.
		\item Таблица имеет фиксированный набор столбцов с названиями и типами.
		\item Фиксированный в каждый момент времени; вообще столбцы можно добавлять, менять, удалять, хоть это и сложные для СУБД операции.
		\item В таблице лежит неупорядоченный набор строк с данными.
		\item На столбцы (или их группы) могут накладываться дополнительные ограничения (например, <<все значения в столбце различны>>).
	\end{itemize}
\end{frame}
